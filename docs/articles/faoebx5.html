<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>faoebx5 overview • faoebx5</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png">
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png">
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png">
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png">
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.4.0/flatly/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><link href="../extra.css" rel="stylesheet">
<meta property="og:title" content="faoebx5 overview">
<meta property="og:description" content="faoebx5">
<meta property="og:image" content="http://bergertom.github.io/faoebx5/logo.png">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">
    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">faoebx5</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">1.1.0</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../index.html">
    <span class="fas fa fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../articles/faoebx5.html">Get started</a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right"></ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><link href="faoebx5_files/anchor-sections-1.0/anchor-sections.css" rel="stylesheet">
<script src="faoebx5_files/anchor-sections-1.0/anchor-sections.js"></script><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1 data-toc-skip>faoebx5 overview</h1>
            
            <h4 class="date">2020-11-17</h4>
      
      
      <div class="hidden name"><code>faoebx5.Rmd</code></div>

    </div>

    
    
<p>This library provides the basic connectivity with EBX5. It allows to read, insert, update and delete data stored in EBX5. A previous version of the library was using keyring to persist the password into the secure store provided by the operating system (Windows and macOS). As this library is an additional install on Linux which we use on the shiny server, it cannot be used.</p>
<p>This is the base library, which requires to specify location and name of each reference in EBX5. <code>fishstatr</code> is a companion library, which uses a user-created Metadata structure to allow programs to discover available objects in EBX5, their attributes and connections. Using this library allows the program to access reference-data, whithout having to know the exact location: it allows users to move things in EBX5 wthout breaking the programs which as they use a code-list's Acronym instead of the excat location.</p>
<div id="how-to-use" class="section level1">
<h1 class="hasAnchor">
<a href="#how-to-use" class="anchor"></a>How to use</h1>
<div id="setupebxconnection" class="section level2">
<h2 class="hasAnchor">
<a href="#setupebxconnection" class="anchor"></a>SetupEBXConnection()</h2>
<p>The first time you use the <code>faoebx5</code> package you must setup the EBX5 connection details. The faoebx5 library reads the settings from a file, so that you do not have to provide it for every request.</p>
<div class="sourceCode"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="st">'faoebx5'</span><span class="op">)</span>
<span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="st"><a href="http://dplyr.tidyverse.org">'dplyr'</a></span><span class="op">)</span>
<span class="co">#SetEBXCredentials(</span>
<span class="co">#    username = "SilvaLu", </span>
<span class="co">#    password="secret", </span>
<span class="co">#    ebx_soap_url="https://my-ebx5.com/ebx-dataservices/connector")</span></code></pre></div>
</div>
<div id="ebxread" class="section level2">
<h2 class="hasAnchor">
<a href="#ebxread" class="anchor"></a>EBXRead()</h2>
<p>This function reads code list data from EBX5. The user needs read-only permission for the given dataset, and table.</p>
<div class="sourceCode"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co">#cl_fao_level1 &lt;- EBXRead(branch='Fishery',</span>
<span class="co">#'           instance='Fishery',</span>
<span class="co">#'           folder='Country',</span>
<span class="co">#'           table='CountryItem')</span>
<span class="co">#cl_fao_level1</span></code></pre></div>
<hr>
<div class="alert alert-dismissible alert-warning">
<button type="button" class="close" data-dismiss="alert">
×
</button>
<h4 class="alert-heading">
Warning!
</h4>
<p class="mb-0">
Please, be aware that the next three functions can modify the original data. Your account needs to have rights to do update the original data.
</p>
</div>
<hr>
</div>
<div id="ebxinsert" class="section level2">
<h2 class="hasAnchor">
<a href="#ebxinsert" class="anchor"></a>EBXInsert()</h2>
<p><code><a href="../reference/EBXInsert.html">EBXInsert()</a></code>,<code><a href="../reference/EBXUpdate.html">EBXUpdate()</a></code> and <code><a href="../reference/EBXRemove.html">EBXRemove()</a></code> should be used carefully, as they change the original data stored in the EBX database. The user account used cannot be read-only, and must have been granted write permission on the dataset and on the table.</p>
<p>In order to uniquely identify the rows, the primary key(s) of the table needs to be specified (usually the Identifier) .</p>
<div class="sourceCode"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co">#cl_insert &lt;- data.frame(</span>
<span class="co">#            Identifier = 99999,</span>
<span class="co">#            FAO_Code = 7L,</span>
<span class="co">#            NameEn = "XXXX_English",</span>
<span class="co">#            NameFr = "XXXX_French",</span>
<span class="co">#            NameEs = "XXXX_Es"</span>
<span class="co">#)</span></code></pre></div>
<p>Once we have created the data frame with the new rows, the next step is to run the function <code>InsertEBXCodeList()</code> specificating the arguments: <code>data</code> with data frame composed by the news rows to be inserted, <code>cl_name</code> the code list name, <code>folder</code> the folder name, <code>branch</code> the branch name, and <code>instance</code> the instance name.</p>
<div class="sourceCode"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co">#EBXInsert(</span>
<span class="co">#           branch='Fishery',</span>
<span class="co">#           instance='Fishery',</span>
<span class="co">#           folder='Metadata',</span>
<span class="co">#           table='Test_table',</span>
<span class="co">#           data=cl_insert)</span>
<span class="co">#)</span>
<span class="co">#</span>
<span class="co">#cl_read &lt;- EBXRead(</span>
<span class="co">#           branch='Fishery',</span>
<span class="co">#           instance='Fishery',</span>
<span class="co">#           folder='Metadata',</span>
<span class="co">#           table='Test_table')</span>
<span class="co">#cl_read</span></code></pre></div>
</div>
<div id="ebxupdate" class="section level2">
<h2 class="hasAnchor">
<a href="#ebxupdate" class="anchor"></a>EBXUpdate()</h2>
<p><code><a href="../reference/EBXUpdate.html">EBXUpdate()</a></code> function updates or inserts exiating information in the database. In this example, we just changed the data stored in the column <code>NameEs</code> from <code>XXXX_Es</code> to <code>Name spanish</code>.</p>
<div class="sourceCode"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co">#cl_update &lt;- data.frame(</span>
<span class="co">#            Identifier = 99999,</span>
<span class="co">#            FAO_Code = 7L,</span>
<span class="co">#            NameEn = "XXXX_English",</span>
<span class="co">#            NameFr = "XXXX_French",</span>
<span class="co">#            NameEs = "Name spanish"</span>
<span class="co">#)</span>
<span class="co">#</span>
<span class="co">#EBXUpdate(</span>
<span class="co">#           branch='Fishery',</span>
<span class="co">#           instance='Fishery',</span>
<span class="co">#           folder='Metadata',</span>
<span class="co">#           table='Test_table',</span>
<span class="co">#           data=cl_update)</span>
<span class="co">#)</span>
<span class="co">#</span>
<span class="co">#cl_read &lt;- EBXRead(</span>
<span class="co">#           branch='Fishery',</span>
<span class="co">#           instance='Fishery',</span>
<span class="co">#           folder='Metadata',</span>
<span class="co">#           table='Test_table')</span>
<span class="co">#cl_read</span></code></pre></div>
</div>
<div id="ebxremove" class="section level2">
<h2 class="hasAnchor">
<a href="#ebxremove" class="anchor"></a>EBXRemove()</h2>
<p><code><a href="../reference/EBXRemove.html">EBXRemove()</a></code> deletes rows in the database. For a delete, you only have to specify the primary key.</p>
<div class="sourceCode"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co">#cl_delete &lt;- data.frame(</span>
<span class="co">#            Identifier = 99999</span>
<span class="co">#)</span>
<span class="co">#</span>
<span class="co">#EBXRemove(</span>
<span class="co">#           branch='Fishery',</span>
<span class="co">#           instance='Fishery',</span>
<span class="co">#           folder='Metadata',</span>
<span class="co">#           table='Test_table',</span>
<span class="co">#           data=cl_delete)</span>
<span class="co">#)</span>
<span class="co">#</span>
<span class="co">#cl_read &lt;- EBXRead(</span>
<span class="co">#           branch='Fishery',</span>
<span class="co">#           instance='Fishery',</span>
<span class="co">#           folder='Metadata',</span>
<span class="co">#           table='Test_table')</span>
<span class="co">#cl_read</span></code></pre></div>
</div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">

        <nav id="toc" data-toggle="toc"><h2 data-toc-skip>Contents</h2>
    </nav>
</div>

</div>



      <footer><div class="copyright">
  <p>Developed by <a href="https://bergertom.github.io">Thomas Berger</a>, <a href="https://lgsilvaesilva.github.io">Luis G. Silva e Silva</a>.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.6.1.</p>
</div>

      </footer>
</div>

  


  </body>
</html>
